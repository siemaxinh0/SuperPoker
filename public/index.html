<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperPoker</title>
    <link rel="icon" type="image/png" href="minilogo.png">
    <link rel="apple-touch-icon" href="minilogo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Ekran g≈Ç√≥wny - wyb√≥r akcji -->
    <div id="main-menu" class="screen">
        <div class="menu-container">
            <!-- Logo section -->
            <div class="logo-section">
                <img src="logo.png" alt="Super Poker Logo" class="logo-image">
                <h1 class="logo-title">SuperPoker</h1>
                <p class="logo-subtitle">ka≈ºdƒÖ rƒôkƒô gra siƒô inaczej.</p>
            </div>
            
            <div class="menu-buttons-grid">
                <button id="btn-create-lobby" class="btn-menu-tile">
                    <div class="tile-icon">üéÆ</div>
                    <div class="tile-label">Stw√≥rz<br>Lobby</div>
                    <div class="tile-glow"></div>
                </button>
                <button id="btn-join-lobby" class="btn-menu-tile">
                    <div class="tile-icon">üöÄ</div>
                    <div class="tile-label">Do≈ÇƒÖcz<br>do Lobby</div>
                    <div class="tile-glow"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Ekran tworzenia/do≈ÇƒÖczania do lobby -->
    <div id="lobby-join-screen" class="screen hidden">
        <div class="login-container">
            <button id="btn-back-to-menu" class="btn-back">‚Üê Powr√≥t</button>
            
            <h2 id="lobby-action-title">Do≈ÇƒÖcz do Lobby</h2>
            
            <div class="login-form">
                <input type="text" id="player-name" placeholder="Tw√≥j nick..." maxlength="15" autocomplete="off">
                
                <div id="join-code-section">
                    <input type="text" id="lobby-code-input" placeholder="Kod lobby (6 znak√≥w)" maxlength="6" autocomplete="off" style="text-transform: uppercase;">
                </div>
                
                <button id="btn-confirm-lobby" class="btn btn-primary">Do≈ÇƒÖcz</button>
            </div>
        </div>
    </div>

    <!-- Ekran Lobby (poczekalnia) -->
    <div id="lobby-screen" class="screen hidden">
        <div class="lobby-container-new">
            <!-- Header z kodem -->
            <div class="lobby-header-new">
                <div class="lobby-title">
                    <span class="lobby-icon">üé∞</span>
                    <h2>Lobby</h2>
                </div>
                <div class="lobby-code-box" id="lobby-code-box" title="Kliknij aby skopiowaƒá">
                    <span class="code-label">KOD</span>
                    <span id="lobby-code" class="code-value">------</span>
                    <span class="code-copy-hint">üìã kliknij aby skopiowaƒá</span>
                </div>
            </div>
            
            <div class="lobby-main">
                <!-- Lewa kolumna - Ustawienia -->
                <div class="lobby-settings">
                    <div class="settings-section">
                        <h3>üí∞ Blindy i Stack</h3>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label>Small Blind</label>
                                <input type="number" id="config-small-blind" value="10" min="1">
                            </div>
                            <div class="setting-item">
                                <label>Big Blind</label>
                                <input type="number" id="config-big-blind" value="20" min="2">
                            </div>
                            <div class="setting-item setting-full">
                                <label>Starting Stack</label>
                                <input type="number" id="config-starting-chips" value="1000" min="100" step="100">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>‚ö° Funkcje specjalne</h3>
                        <div class="feature-toggles">
                            <div class="feature-toggle" id="toggle-bb-ante">
                                <input type="checkbox" id="config-bb-ante-enabled" hidden>
                                <div class="toggle-content">
                                    <span class="toggle-icon">üéØ</span>
                                    <span class="toggle-name">BB Ante</span>
                                    <span class="toggle-status">wy≈ÇƒÖczono</span>
                                </div>
                            </div>
                            <div class="feature-toggle" id="toggle-bomb-pot">
                                <input type="checkbox" id="config-bomb-pot-enabled" checked hidden>
                                <div class="toggle-content">
                                    <span class="toggle-icon">üí£</span>
                                    <span class="toggle-name">Bomb Pot</span>
                                    <span class="toggle-status">w≈ÇƒÖczono</span>
                                </div>
                            </div>
                            <div class="feature-toggle" id="toggle-run-it-twice">
                                <input type="checkbox" id="config-run-it-twice-enabled" checked hidden>
                                <div class="toggle-content">
                                    <span class="toggle-icon">üé≤</span>
                                    <span class="toggle-name">Run It Twice</span>
                                    <span class="toggle-status">w≈ÇƒÖczono</span>
                                </div>
                            </div>
                            <div class="feature-toggle" id="toggle-straddle">
                                <input type="checkbox" id="config-straddle-enabled" hidden>
                                <div class="toggle-content">
                                    <span class="toggle-icon">üíé</span>
                                    <span class="toggle-name">Straddle</span>
                                    <span class="toggle-status">wy≈ÇƒÖczono</span>
                                </div>
                            </div>
                        </div>
                        <div class="ante-amount-row" id="bb-ante-amount-group" style="display: none;">
                            <label>Warto≈õƒá BB Ante</label>
                            <input type="number" id="config-bb-ante-amount" value="20" min="1">
                        </div>
                        <div class="turn-timeout-row" id="turn-timeout-group">
                            <label>‚è±Ô∏è Czas na ruch: <span id="turn-timeout-value">15</span>s</label>
                            <input type="range" id="config-turn-timeout" value="15" min="5" max="60" step="5" class="turn-timeout-slider">
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üé® Styl kart</h3>
                        <div class="card-skin-selector">
                            <div class="skin-option selected" data-skin="classic">
                                <div class="skin-preview">
                                    <div class="preview-card red">A‚ô•</div>
                                    <div class="preview-card black">K‚ô†</div>
                                </div>
                                <span class="skin-name">Klasyczna</span>
                            </div>
                            <div class="skin-option" data-skin="colorful">
                                <div class="skin-preview">
                                    <div class="preview-card" style="color: #dc3545;">A‚ô•</div>
                                    <div class="preview-card" style="color: #198754;">K‚ô£</div>
                                </div>
                                <span class="skin-name">4 kolory</span>
                            </div>
                            <div class="skin-option" data-skin="dark">
                                <div class="skin-preview dark-preview">
                                    <div class="preview-card">A‚ô•</div>
                                    <div class="preview-card">K‚ô†</div>
                                </div>
                                <span class="skin-name">Ciemna</span>
                            </div>
                        </div>
                        <input type="hidden" id="config-card-skin" value="classic">
                    </div>
                </div>
                
                <!-- Prawa kolumna - Gracze -->
                <div class="lobby-players">
                    <div class="players-section">
                        <h3>üë• Gracze <span class="player-count">(<span id="players-count">0</span>/<span id="max-players">8</span>)</span></h3>
                        <ul id="lobby-players-list" class="players-list-new"></ul>
                    </div>
                    
                    <div class="spectators-section">
                        <h3>üëÅÔ∏è Obserwatorzy <span class="spectator-count">(<span id="spectators-count">0</span>)</span></h3>
                        <ul id="lobby-spectators-list" class="players-list-new spectators"></ul>
                    </div>
                    
                    <div class="role-buttons">
                        <button id="btn-become-spectator" class="btn btn-role hidden">
                            üëÅÔ∏è Zosta≈Ñ obserwatorem
                        </button>
                        <button id="btn-become-player" class="btn btn-role hidden">
                            üéÆ Do≈ÇƒÖcz do gry
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="lobby-footer-new">
                <div id="lobby-status" class="lobby-status-new">Oczekiwanie na graczy...</div>
                <div class="lobby-actions">
                    <button id="btn-leave-lobby" class="btn btn-leave">
                        üö™ Opu≈õƒá lobby
                    </button>
                    <button id="btn-start-game" class="btn btn-start hidden" disabled>
                        üéÆ Rozpocznij grƒô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ekran gry -->
    <div id="game-screen" class="screen hidden">
        <!-- Kod gry w rogu -->
        <div id="game-code-display" class="game-code-display" title="Kliknij aby skopiowaƒá">
            <span class="game-code-label">KOD:</span>
            <span id="game-code-value" class="game-code-value">------</span>
        </div>
        
        <!-- Modal potwierdzenia opuszczenia -->
        <div id="leave-confirm-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <h3>üö™ Opu≈õƒá lobby</h3>
                <p>Czy na pewno chcesz opu≈õciƒá lobby?</p>
                <div class="modal-buttons">
                    <button id="btn-confirm-leave" class="btn btn-danger">Tak, opu≈õƒá</button>
                    <button id="btn-cancel-leave" class="btn btn-secondary">Anuluj</button>
                </div>
            </div>
        </div>
        
        <!-- Overlay nowego rozdania -->
        <div id="new-round-overlay" class="new-round-overlay hidden">
            <div class="new-round-content">
                <h2 class="new-round-title">NOWE ROZDANIE</h2>
                <div class="shuffle-animation">
                    <div class="shuffle-card shuffle-card-1"></div>
                    <div class="shuffle-card shuffle-card-2"></div>
                    <div class="shuffle-card shuffle-card-3"></div>
                    <div class="shuffle-card shuffle-card-4"></div>
                    <div class="shuffle-card shuffle-card-5"></div>
                </div>
            </div>
        </div>
        
        <!-- Info o obserwatorze -->
        <div id="spectator-banner" class="spectator-banner hidden">
            <span id="spectator-text">üëÅÔ∏è Obserwujesz grƒô</span>
            <button id="btn-join-game" class="btn btn-small btn-primary hidden">Do≈ÇƒÖcz do gry</button>
            <button id="btn-cancel-join" class="btn btn-small btn-secondary hidden">Anuluj oczekiwanie</button>
            <button id="btn-leave-game" class="btn btn-small btn-danger">üö™ Opu≈õƒá</button>
        </div>
        
        <!-- Panel g≈Çosowania Bomb Pot -->
        <div id="bomb-pot-panel" class="bomb-pot-panel hidden">
            <div class="bomb-pot-content">
                <!-- Panel startowania g≈Çosowania -->
                <div id="bomb-pot-start" class="bomb-pot-section">
                    <h4>üí£ Bomb Pot</h4>
                    <div class="bomb-pot-stake-input">
                        <label>Stawka:</label>
                        <input type="number" id="bomb-pot-stake" min="20" step="10" value="100">
                    </div>
                    <button id="btn-start-bomb-pot-vote" class="btn btn-warning">
                        üó≥Ô∏è Rozpocznij g≈Çosowanie
                    </button>
                </div>
                
                <!-- Panel g≈Çosowania (widoczny podczas aktywnego g≈Çosowania) -->
                <div id="bomb-pot-voting" class="bomb-pot-section hidden">
                    <h4>üí£ G≈Çosowanie Bomb Pot</h4>
                    <div class="bomb-pot-info">
                        <span class="bomb-pot-initiator"></span>
                        <span class="bomb-pot-stake-display">Stawka: <strong id="bomb-pot-vote-stake">0</strong></span>
                    </div>
                    <div class="bomb-pot-timer">
                        Pozosta≈Ço: <span id="bomb-pot-timer-display">30</span>s
                    </div>
                    <div class="bomb-pot-votes-display">
                        G≈Çosy: <span id="bomb-pot-yes-votes">0</span> / <span id="bomb-pot-total-voters">0</span>
                    </div>
                    <div id="bomb-pot-vote-buttons" class="bomb-pot-vote-buttons">
                        <button id="btn-bomb-pot-yes" class="btn btn-success">‚úì TAK</button>
                        <button id="btn-bomb-pot-no" class="btn btn-danger">‚úó NIE</button>
                    </div>
                    <div id="bomb-pot-voted-status" class="bomb-pot-voted-status hidden">
                        Zag≈Çosowa≈Çe≈õ: <span id="bomb-pot-my-vote"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Run It Twice Voting Panel -->
        <div id="run-it-twice-panel" class="run-it-twice-panel hidden">
            <div class="run-it-twice-content">
                <h4>üé≤ Run It Twice</h4>
                <p class="run-it-twice-description">Wszyscy gracze muszƒÖ siƒô zgodziƒá, aby rozdaƒá karty dwukrotnie.</p>
                <div class="run-it-twice-timer">
                    Pozosta≈Ço: <span id="run-it-twice-timer-display">15</span>s
                </div>
                <div class="run-it-twice-votes-display">
                    G≈Çosy: <span id="run-it-twice-yes-votes">0</span> / <span id="run-it-twice-total-voters">0</span>
                </div>
                <div id="run-it-twice-vote-buttons" class="run-it-twice-vote-buttons">
                    <button id="btn-run-it-twice-yes" class="btn btn-success">‚úì TAK</button>
                    <button id="btn-run-it-twice-no" class="btn btn-danger">‚úó NIE</button>
                </div>
                <div id="run-it-twice-voted-status" class="run-it-twice-voted-status hidden">
                    Zag≈Çosowa≈Çe≈õ: <span id="run-it-twice-my-vote"></span>
                </div>
            </div>
        </div>
        
        <!-- Wrapper dla sto≈Çu - centrowanie -->
        <div class="poker-table-wrapper">
            <!-- G≈Ç√≥wny st√≥≈Ç -->
            <div class="poker-table">
                <!-- Miejsca graczy (8 pozycji) -->
                <div class="players-container">
                <div class="player-seat" data-seat="0"></div>
                <div class="player-seat" data-seat="1"></div>
                <div class="player-seat" data-seat="2"></div>
                <div class="player-seat" data-seat="3"></div>
                <div class="player-seat" data-seat="4"></div>
                <div class="player-seat" data-seat="5"></div>
                <div class="player-seat" data-seat="6"></div>
                <div class="player-seat" data-seat="7"></div>
            </div>
            
            <!-- ≈örodek sto≈Çu -->
            <div class="table-center">
                <!-- Karty wsp√≥lne -->
                <div class="community-cards" id="community-cards">
                    <div class="card card-placeholder"></div>
                    <div class="card card-placeholder"></div>
                    <div class="card card-placeholder"></div>
                    <div class="card card-placeholder"></div>
                    <div class="card card-placeholder"></div>
                </div>
                
                <!-- Pula -->
                <div class="pot-container">
                    <span class="pot-label">Pula:</span>
                    <span class="pot-amount" id="pot-amount">0</span>
                </div>
                
                <!-- Side Pots -->
                <div class="side-pots-container hidden" id="side-pots-container"></div>
                
                <!-- Faza gry -->
                <div class="phase-indicator" id="phase-indicator">Oczekiwanie...</div>
            </div>
        </div>
        </div> <!-- Koniec poker-table-wrapper -->
        
        <!-- Panel Straddle (po prawej stronie sto≈Çu) -->
        <div id="straddle-panel" class="straddle-panel hidden">
            <div class="straddle-header">
                <span class="straddle-icon">üé≤</span>
                <span class="straddle-title">Straddle</span>
            </div>
            <div class="straddle-pending" id="straddle-pending-list"></div>
            <div class="straddle-amount-input">
                <label for="straddle-amount-input">Kwota:</label>
                <input type="number" id="straddle-amount-input" min="40" step="10" value="40">
                <span class="straddle-min-info" id="straddle-min-info">Min: 2√ó BB</span>
            </div>
            <button id="btn-straddle" class="btn btn-straddle" disabled>
                <span class="btn-icon">üíé</span>
                <span id="straddle-btn-text">Straddle</span>
            </button>
        </div>
        
        <!-- Panel gracza -->
        <div id="player-panel" class="player-panel">
            <!-- Twoje karty -->
            <div class="your-cards-container">
                <h3>Twoje karty</h3>
                <div class="your-cards" id="your-cards">
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                </div>
                <div class="your-hand" id="your-hand"></div>
            </div>
            
            <!-- Twoje info -->
            <div class="your-info">
                <div class="your-name" id="your-name">-</div>
                <div class="your-chips">
                    <span class="chip-icon">ü™ô</span>
                    <span id="your-chips">0</span>
                </div>
            </div>
            
            <!-- Przyciski akcji -->
            <div class="action-buttons" id="action-buttons">
                <button class="btn btn-fold" id="btn-fold" disabled>
                    <span class="btn-icon">‚ùå</span>
                    <span>Fold</span>
                </button>
                <button class="btn btn-check" id="btn-check" disabled>
                    <span class="btn-icon">‚úì</span>
                    <span>Check</span>
                </button>
                <button class="btn btn-call" id="btn-call" disabled>
                    <span class="btn-icon">üìû</span>
                    <span>Call</span>
                    <span class="call-amount" id="call-amount"></span>
                </button>
                <button class="btn btn-bet" id="btn-bet" disabled>
                    <span class="btn-icon">üí∞</span>
                    <span id="bet-label">Bet</span>
                </button>
            </div>
            
            <!-- Przycisk Poka≈º karty (po zako≈Ñczeniu rozdania) -->
            <div class="showdown-actions hidden" id="showdown-actions">
                <button class="btn btn-show-cards" id="btn-show-cards">
                    <span class="btn-icon">üëÅÔ∏è</span>
                    <span>Poka≈º karty</span>
                </button>
            </div>
            
            <!-- Panel Raise/Bet ze sliderem -->
            <div class="raise-panel hidden" id="raise-panel">
                <div class="raise-header">
                    <span class="raise-title" id="raise-title">Raise</span>
                    <button class="raise-close" id="raise-close">‚úï</button>
                </div>
                <div class="raise-amount-display">
                    <span class="raise-label">Kwota:</span>
                    <input type="number" id="bet-amount" class="bet-input" min="0" value="20">
                </div>
                <div class="raise-slider-container">
                    <input type="range" id="bet-slider" class="bet-slider" min="0" max="1000" value="20">
                    <div class="slider-labels">
                        <span id="slider-min">Min</span>
                        <span id="slider-max">Max</span>
                    </div>
                </div>
                <div class="raise-presets">
                    <button class="raise-preset" data-preset="min">Min</button>
                    <button class="raise-preset" data-preset="1/3">‚Öì Puli</button>
                    <button class="raise-preset" data-preset="1/2">¬Ω Puli</button>
                    <button class="raise-preset" data-preset="3/4">¬æ Puli</button>
                    <button class="raise-preset" data-preset="pot">Pula</button>
                    <button class="raise-preset raise-preset-allin" data-preset="allin">All-In</button>
                </div>
                <button class="btn btn-confirm-raise" id="btn-confirm-raise">
                    <span class="btn-icon">‚úì</span>
                    <span id="confirm-raise-label">Potwierd≈∫ Raise</span>
                </button>
            </div>
            
            <!-- Przycisk Poka≈º Karty -->
            <div id="show-cards-container" class="show-cards-container hidden">
                <span class="show-cards-label">Poka≈º karty?</span>
                <button id="btn-show-cards" class="btn btn-show-cards">
                    <span class="btn-icon">üÉè</span>
                    <span>Poka≈º karty</span>
                </button>
            </div>
        </div>
        
        <!-- Log akcji -->
        <div class="action-log" id="action-log">
            <div class="log-header">Historia akcji</div>
            <div class="log-content" id="log-content"></div>
        </div>
        
        <!-- Lista obserwator√≥w podczas gry -->
        <div class="game-spectators-panel hidden" id="game-spectators-panel">
            <div class="spectators-header">
                <span class="spectators-icon">üëÅÔ∏è</span>
                <span class="spectators-title">Obserwatorzy</span>
                <span class="spectators-count" id="game-spectators-count">0</span>
            </div>
            <ul class="spectators-list" id="game-spectators-list"></ul>
        </div>
    </div>
    
    <!-- Toast notifications -->
    <div id="toast-container"></div>

    <!-- Przycisk ustawie≈Ñ (globalny) -->
    <button id="settings-toggle" class="settings-toggle" title="Ustawienia">
        <span class="settings-icon">‚öôÔ∏è</span>
    </button>
    
    <!-- Modal ustawie≈Ñ (globalny) -->
    <div id="settings-modal" class="settings-modal">
        <div class="settings-modal-content">
            <div class="settings-modal-header">
                <h3>‚öôÔ∏è Ustawienia</h3>
                <button id="close-settings" class="close-settings">&times;</button>
            </div>
            
            <div class="settings-section">
                <h4>üîä D≈∫wiƒôk</h4>
                <div class="setting-item">
                    <span class="setting-label"><span class="emoji">üéµ</span> Efekty d≈∫wiƒôkowe</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-sound-effects" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item volume-setting">
                    <span class="setting-label"><span class="emoji">üé∂</span> G≈Ço≈õno≈õƒá muzyki</span>
                    <div class="volume-control">
                        <input type="range" id="music-volume-slider" class="volume-slider" min="0" max="100" value="30">
                        <span class="volume-value" id="music-volume-value">30%</span>
                    </div>
                </div>
            </div>
            
            <div class="settings-section game-actions-section" id="game-actions-section" style="display: none;">
                <h4>üé≤ Akcje w grze</h4>
                <button id="btn-start-bomb-pot" class="btn btn-action" style="display: none;">üí£ Rozpocznij g≈Çosowanie Bomb Pot</button>
                <button id="btn-start-straddle" class="btn btn-action" style="display: none;">üé≤ Postaw Straddle</button>
            </div>
            
            <div class="settings-section leave-lobby-section" id="leave-lobby-section" style="display: none;">
                <button id="btn-settings-leave-lobby" class="btn btn-danger btn-leave-lobby">üö™ Opu≈õƒá lobby</button>
            </div>
        </div>
    </div>
    
    <!-- Modal g≈Çosowania Bomb Pot (mobile) -->
    <div id="bomb-pot-vote-modal" class="vote-modal hidden">
        <div class="vote-modal-content">
            <div class="vote-modal-header">
                <h3>üí£ Bomb Pot</h3>
            </div>
            <div class="vote-modal-body">
                <p class="vote-question">WziƒÖƒá udzia≈Ç w Bomb Pot?</p>
                <p class="vote-details" id="bomb-pot-vote-details">Stawka: <span id="bomb-pot-stake-display">-</span></p>
            </div>
            <div class="vote-modal-actions">
                <button id="btn-bomb-pot-mobile-yes" class="btn btn-success">‚úì Tak</button>
                <button id="btn-bomb-pot-mobile-no" class="btn btn-danger">‚úó Nie</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
